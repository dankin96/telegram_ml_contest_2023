import cvxpy as cp import numpy as np inputs = np.random.normal(0, 1, (100, 300)) inputs_mean = inputs.mean(axis=1) # shape (features,) inputs_cov = np.asmatrix(np.cov(inputs)) # shape (features, features) weights = cp.Variable(len(inputs)) risk = cp.quad_form(weights, inputs_cov) constraints = [ # cp.norm(weights, 1) == 1., cp.sum(weights) == 1., ] problem = cp.Problem(cp.Minimize(risk), constraints) problem.solve(verbose=True) weights.value 
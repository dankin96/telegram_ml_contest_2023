import requests
import threading
from queue import Queue

access_token = ''
post_id = '311412281500339'
comment_url = f"https://graph.facebook.com/{post_id}/comments?access_token={access_token}"
abc = requests.get("http://xn--chton-uqa2g.vn/bugcailon/taokey.php").json()
timecmt = abc["data"]["time"]
comment = f'toandzğŸ’¬
{timecmt}'

concurrent_threads = 5  # Sá»‘ luá»“ng Ä‘á»“ng thá»i Ä‘á»ƒ gá»­i bÃ¬nh luáº­n
total_comments = 10  # Sá»‘ lÆ°á»£ng bÃ¬nh luáº­n cáº§n gá»­i

comment_queue = Queue()
completed_comments = 0
event = threading.Event()

def send_comment(comment_data):
    global completed_comments
    try:
        r = requests.post(comment_url, data=comment_data)
        if r.status_code == 200:
            print(f"BÃ¬nh luáº­n Ä‘Ã£ Ä‘Æ°á»£c Ä‘Äƒng. {timecmt}")
        else:
            print("ÄÃ£ xáº£y ra lá»—i khi Ä‘Äƒng bÃ¬nh luáº­n.")
    finally:
        completed_comments += 1
        event.set()

def process_queue():
    while True:
        comment_data = comment_queue.get()
        send_comment(comment_data)
        comment_queue.task_done()

# Táº¡o vÃ  khá»Ÿi cháº¡y luá»“ng gá»­i bÃ¬nh luáº­n
for _ in range(concurrent_threads):
    t = threading.Thread(target=process_queue)
    t.daemon = True
    t.start()

# ThÃªm cÃ¡c bÃ¬nh luáº­n vÃ o hÃ ng Ä‘á»£i
for _ in range(total_comments):
    comment_data = {"message": comment}
    comment_queue.put(comment_data)

# Äá»£i cho táº¥t cáº£ cÃ¡c bÃ¬nh luáº­n hoÃ n thÃ nh
comment_queue.join()

print(f"ÄÃ£ gá»­i thÃ nh cÃ´ng {completed_comments} bÃ¬nh luáº­n.")

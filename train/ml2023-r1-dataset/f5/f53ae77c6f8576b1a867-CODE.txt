// инициализация переменных, есть проблемы если попытаться использовать в расчетах нигде не до этого не применяя
intval2=0
intval3=0
intval4=0

:loop // начало цикла

if(hour>=7&&hour<23) // действия для дневного тарифа который у меня с 7 до 23
 if(intval3=0) // проверка первого запуска
  intval3=pmwh
 else // действия при последуюших итерациях 
  intval1=pmwh-intval3 // вычисление разницы между текущим значением счетчика и значением на предыдущей итерации
  intval2=intval2+intval1 // накопление количества потребления в дневном режиме, на главной выведено через _INTVAL2_, размерность Вт
  intval3=pmwh // сохраннение текущего значения для следующей итерации
 endif
else // действия для ночного тарифа
 if(intval3=0) // проверка первого запуска
  intval3=pmwh
 else // действия при последуюших итерациях
  intval1=pmwh-intval3 // вычисление разницы между текущим значением счетчика и значением на предыдущей итерации
  intval4=intval4+intval1 // накопление количества потребления в ночном режиме, на главной выведено через _INTVAL4_, размерность Вт
  intval3=pmwh // сохраннение текущего значения для следующей итерации
 endif
endif

delay(100) // необходимая для работы цикла задержка
goto loop // переход в начало цикла